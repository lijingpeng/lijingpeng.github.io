<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Frank</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="计算机 网络 互联网">
<meta property="og:type" content="website">
<meta property="og:title" content="Frank">
<meta property="og:url" content="http://www.notehub.cn/page/2/index.html">
<meta property="og:site_name" content="Frank">
<meta property="og:description" content="计算机 网络 互联网">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Frank">
<meta name="twitter:description" content="计算机 网络 互联网">
  
  
    <link rel="icon" href="favicon.png">
  
  <link href='//fonts.css.network/css?family=Open+Sans:400italic,400,600' rel='stylesheet' type='text/css'>
  <link href="//fonts.css.network/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  

  
</head>

<body>
  <div id="container">
    <header id="header">
  <div id="header-main" class="header-inner">
    <div class="outer">
      <a href="/" id="logo"><i class="logo" style="background-image: url(/css/images/logo.jpg)"></i><span class="site-title">Frank</span></a>
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/.">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/categories">Categories</a>
        
          <a class="main-nav-link" href="/tags">Tags</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      
        <nav id="sub-nav">
          <div class="profile" id="profile-nav">
            <a id="profile-anchor" href="javascript:;"><img class="avatar" src="/css/images/logo.png"><i class="fa fa-caret-down"></i></a>
          </div>
        </nav>
      
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"> </button><input type="hidden" name="sitesearch" value="http://www.notehub.cn"></form>
      </div>
    </div>
  </div>
  <div id="main-nav-mobile" class="header-sub header-inner">
    <table class="menu outer">
      <tr>
        
          <td><a class="main-nav-link" href="/.">Home</a></td>
        
          <td><a class="main-nav-link" href="/archives">Archives</a></td>
        
          <td><a class="main-nav-link" href="/categories">Categories</a></td>
        
          <td><a class="main-nav-link" href="/tags">Tags</a></td>
        
          <td><a class="main-nav-link" href="/about">About</a></td>
        
        <td>
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="hidden" name="sitesearch" value="http://www.notehub.cn"></form>
        </td>
      </tr>
    </table>
  </div>
</header>

    <div class="outer">
      
        <aside id="profile">
  <div class="inner profile-inner">
    <div class="base-info profile-block">
      <img id="avatar" src="/css/images/logo.png">
      <h2 id="name">Li Jingpeng</h2>
      <!-- <h3 id="title">undefined</h3> -->
      <span id="location"><i class="fa fa-map-marker"></i>Hangzhou, China</span>
      <a id="follow" href="Https://weibo.com/329299516">关注我</a>
    </div>
    <div class="article-info profile-block">
      <div class="article-info-block">
        107
        <span>文章</span>
      </div>
      <div class="article-info-block">
        42
        <span>标签</span>
      </div>
    </div>
    
    <div class="contact-info profile-block">
      <table class="contact-list">
        <tr>
          
          <td><a href="https://github.com/lijingpeng" target="_blank" title="github"><i class="fa fa-github"></i></a></td>
          
          <td><a href="#" target="_blank" title="twitter"><i class="fa fa-twitter"></i></a></td>
          
          <td><a href="#" target="_blank" title="facebook"><i class="fa fa-facebook"></i></a></td>
          
          <td><a href="/me@lijingpeng.org" target="_blank" title="email"><i class="fa fa-email"></i></a></td>
          
          <td><a href="/atom.xml" target="_blank" title="rss"><i class="fa fa-rss"></i></a></td>
          
        </tr>
      </table>
    </div>
    
    
  </div>
</aside>

      
      <section id="main">
      <article id="post-other/public_cdn" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/11/other/public_cdn/">CDNJS 库以及 Google Fonts、Ajax 和 Gravatar 反代</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2016/09/11/other/public_cdn/">
      <time datetime="2016-09-10T16:00:00.000Z" itemprop="datePublished">2016-09-11</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/other/">other</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p>由于某些众所周知的原因，好多开源的 JS 库采用的国外 CDN 托管方式在国内访问速度不如人意。所以我们特意制作了这个公益项目，托管了 CDNJS 的所有开源 JS 库以及反代了 Google Fonts、Ajax 和 Gravatar，并且全部支持 http 和 https</p>
<h2 id="u4E00_u3001CDNJS__u5F00_u6E90_JS__u5E93"><a href="#u4E00_u3001CDNJS__u5F00_u6E90_JS__u5E93" class="headerlink" title="一、CDNJS 开源 JS 库"></a>一、CDNJS 开源 JS 库</h2><p>我们采用的方法是每天定时同步 CDNJS 的 Github</p>
<p>所有的 JS 库可以在这儿找到您需要的链接</p>
<p><a href="http://cdn.css.net/libs/" target="_blank" rel="external">http://cdn.css.net/libs/</a></p>
<p>并且支持 https ，比如</p>
<p><a href="http://cdn.css.net/libs/jquery/2.1.4/jquery.min.js" target="_blank" rel="external">http://cdn.css.net/libs/jquery/2.1.4/jquery.min.js</a><br><a href="https://cdn.css.net/libs/jquery/2.1.4/jquery.min.js" target="_blank" rel="external">https://cdn.css.net/libs/jquery/2.1.4/jquery.min.js</a></p>
<h2 id="u4E8C_u3001Google_Fonts"><a href="#u4E8C_u3001Google_Fonts" class="headerlink" title="二、Google Fonts"></a>二、Google Fonts</h2><p>我们采用的方法是万能的 Nginx 反代 + 关键词替换，具体方法可以摸这儿。</p>
<p>使用的时候，您只需要替换 fonts.googleapis.com 为 fonts.css.network 即可，如</p>
<p><link href="//fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet"><br>替换成</p>
<p><link href="//fonts.css.network/css?family=Open+Sans" rel="stylesheet"><br>如果需要 Material icons ，则把</p>
<p><a href="https://fonts.googleapis.com/icon?family=Material+Icons" target="_blank" rel="external">https://fonts.googleapis.com/icon?family=Material+Icons</a><br>替换成</p>
<p><a href="https://fonts.css.network/icon?family=Material+Icons" target="_blank" rel="external">https://fonts.css.network/icon?family=Material+Icons</a><br>即可</p>
<h2 id="u4E09_u3001Google__u524D_u7AEF_u516C_u5171_u5E93"><a href="#u4E09_u3001Google__u524D_u7AEF_u516C_u5171_u5E93" class="headerlink" title="三、Google 前端公共库"></a>三、Google 前端公共库</h2><p>方法同上，直接替换 ajax.googleapis.com 为 ajax.css.network 即可，如</p>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
替换成

<script type="text/javascript" src="//ajax.css.network/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<h2 id="u56DB_u3001Gravatar__u53CD_u4EE3"><a href="#u56DB_u3001Gravatar__u53CD_u4EE3" class="headerlink" title="四、Gravatar 反代"></a>四、Gravatar 反代</h2><p>方法还是同上，直接替换 *.gravatar.com 为 gravatar.css.network 即可，如</p>
<p><a href="https://cn.gravatar.com/avatar/8406d089bc81b664a2610b8d214c1428" target="_blank" rel="external">https://cn.gravatar.com/avatar/8406d089bc81b664a2610b8d214c1428</a><br>替换成</p>
<p><a href="https://gravatar.css.network/avatar/8406d089bc81b664a2610b8d214c1428" target="_blank" rel="external">https://gravatar.css.network/avatar/8406d089bc81b664a2610b8d214c1428</a></p>
<p>From: <a href="https://ttt.tt/185/" target="_blank" rel="external">https://ttt.tt/185/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.notehub.cn/2016/09/11/other/public_cdn/" data-id="ciucofbvt00181fjhg61f0mzr" class="article-share-link">分享到</a>
      
        <a href="http://www.notehub.cn/2016/09/11/other/public_cdn/#ds-thread" class="article-comment-link">评论</a>
      
      
    </footer>
  </div>
  
</article>



    
      <article id="post-algo/kaggle/gbid" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/09/algo/kaggle/gbid/">kaggle之Grupo Bimbo Inventory Demand</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2016/09/09/algo/kaggle/gbid/">
      <time datetime="2016-09-09T05:48:13.000Z" itemprop="datePublished">2016-09-09</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/kaggle/">kaggle</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <h2 id="Grupo_Bimbo_Inventory_Demand"><a href="#Grupo_Bimbo_Inventory_Demand" class="headerlink" title="Grupo Bimbo Inventory Demand"></a>Grupo Bimbo Inventory Demand</h2><p><a href="https://github.com/lijingpeng/kaggle" target="_blank" rel="external">kaggle比赛解决方案集合</a></p>
<p><a href="https://www.kaggle.com/c/grupo-bimbo-inventory-demand" target="_blank" rel="external">Grupo Bimbo Inventory Demand</a> 在这个比赛中，我们需要预测某个产品在某个销售点每周的需求量。数据包含墨西哥9周的销售数据。每周，货运车辆把产品发往销售点，每笔交易包含销售量和退货量，其中退货量主要由未销售出的和过期的产品组成。每个产品的需求量是指该商品这周的销售量减去下周的退货量。</p>
<p>几点注意：</p>
<ol>
<li><p>测试数据中可能包含训练数据中不存在的商品。这在实际的生活中是十分常见的。所以模型必须很好的适应这一点。  </p>
</li>
<li><p>同一个客户id可能含有不同的客户名字，因为客户名并没有归一化  </p>
</li>
<li><p>需求量是一个大于等于零的值，Venta_uni_hoy - Dev_uni_proxima有时候为负是因为有时候退货量有时候累计了好几星期。  </p>
</li>
</ol>
<pre><code>Semana — Week number (From Thursday to Wednesday) - 星期几
Agencia_ID — Sales Depot ID - 销售地id
Canal_ID — Sales Channel ID - 销售渠道id
Ruta_SAK — Route ID (Several routes = Sales Depot)
Cliente_ID — Client ID - 客户id
NombreCliente — Client name - 客户名
Producto_ID — Product ID - 产品id
NombreProducto — Product Name - 产品名
Venta_uni_hoy — Sales unit this week (integer) - 本周销量
Venta_hoy — Sales this week (unit: pesos) - 本周销售额
Dev_uni_proxima — Returns unit next week (integer) - 退货量
Dev_proxima — Returns next week (unit: pesos) - 退货销售额
Demanda_uni_equil — Adjusted Demand (integer) (This is the target you will predict) - 需求量（目标值）
</code></pre><p>销量预测是一个非常有意义的问题，在实际应用中有多种应用价值，例如快递的发货量预测、运输规划等等。粗看起来，这个问题很像一个时间序列的预测问题，但是销售地、人、类目的组合太多，时间累积太短，因此不足以支撑时间序列预测。因此我们把他作为一个回归问题来进行分析。很遗憾的是数据量巨大，解压缩后训练集有7000万+数据，对于我的小破本来说已经无法支撑跑这么大数据集的机器学习任务了。在Kaggle中我找到了一个使用XGBoost的解决方案，下面来简单介绍一下思路和代码。一些关键代码的注释我翻译为中文了。</p>
<p>特征工程的基本思路：</p>
<p>计算第三周的统计特征用来预测第四周的需求、计算第四周的统计特征用来预测第五周的需求…</p>
<pre><code class="python"># A Python implementation of the awesome script by Bohdan Pavlyshenko: http://tinyurl.com/jd6k2kr
# and with inspiration from Rodolfo Lomascolo&#39;s  http://tinyurl.com/z6qmxfk
#
# Author: willgraf
import numpy as np
import pandas as pd
import xgboost as xgb
import pdb

from sklearn.metrics import mean_squared_error
from sklearn.cross_validation import train_test_split

from subprocess import check_output

## --------------------------全局变量-----------------------------------------
#
LAG_WEEK_VAL = 3 # set to 3 to use lagged features.
BIG_LAG = True # set to True if to use more than 1 lagged_featc
## --------------------------函数-----------------------------------------

def get_dataframe():
    &#39;&#39;&#39;
    载入训练集和测试集，对于训练集我们设置目标为『Demanda_uni_equil』列，测试集目标列暂设定为0.
    这里有一个全局变量LAG_WEEK_VAL，表示week大于LAG_WEEK_VAL的数据作为训练集（训练集中只有第三周到第9周的数据，目标是预测第10和11周的数据）
    &#39;&#39;&#39;
    print(&#39;Loading training data&#39;)
    train = pd.read_csv(&#39;train.csv&#39;,
                        usecols=[&#39;Semana&#39;,&#39;Agencia_ID&#39;,&#39;Ruta_SAK&#39;,&#39;Cliente_ID&#39;,&#39;Producto_ID&#39;,&#39;Demanda_uni_equil&#39;])

    print(&#39;Loading test data&#39;)
    test = pd.read_csv(&#39;test.csv&#39;,
                       usecols=[&#39;Semana&#39;,&#39;Agencia_ID&#39;,&#39;Ruta_SAK&#39;,&#39;Cliente_ID&#39;,&#39;Producto_ID&#39;,&#39;id&#39;])

    print(&#39;Merging train &amp; test data&#39;)
    # lagged week features
    train = train.loc[train[&#39;Semana&#39;] &gt; LAG_WEEK_VAL,]
    train[&#39;id&#39;] = 0
    test[&#39;Demanda_uni_equil&#39;] = None
    train[&#39;target&#39;] = train[&#39;Demanda_uni_equil&#39;]
    test[&#39;target&#39;] = 0
    # 将训练集和测试集结合到一起
    return pd.concat([train, test])

def create_lagged_feats(data, num_lag):
    &#39;&#39;&#39;
    构建滞后的销量特征。即使用3~8周的销售数据构造特征，为接下来9、10、11周的预测做准备。
    举例来说，第三周的销售数据统计特征作为第四周销量影响因子
    特征列名命名为: target_lNUMBER
    &#39;&#39;&#39;
    # 根据这三列生成特征
    keys = [&#39;Semana&#39;, &#39;Cliente_ID&#39;, &#39;Producto_ID&#39;]
    lag_feat = &#39;target_l&#39; + str(num_lag)
    print(&#39;Creating lagged feature: %s&#39; % lag_feat)
    data1 = df.loc[: , [&#39;Cliente_ID&#39;, &#39;Producto_ID&#39;]]
    # 对week数加1，为接下来的join做准备
    data1[&#39;Semana&#39;] = df.loc[: , &#39;Semana&#39;].apply(lambda x: x + 1)
    # 拷贝训练集中的目标列，并命名为target_lNUMBER，为了接下来求平均值做准备
    data1[lag_feat] = df.loc[: , &#39;target&#39;]
    # groupby &#39;Semana&#39;, &#39;Cliente_ID&#39;, &#39;Producto_ID&#39;并求target列的平均值
    data1 = pd.groupby(data1, keys).mean().reset_index()
    # JOIN：把平均值的统计特征join到data中
    return pd.merge(data, data1, how=&#39;left&#39;, on=keys, left_index=False, right_index=False,
                    suffixes=(&#39;&#39;, &#39;_lag&#39; + str(num_lag)), copy=False)

def create_freq_feats(data, column_name):
    &#39;&#39;&#39;
    求列的频率特征，也就是求对应列每周的平均值
    &#39;&#39;&#39;
    freq_feat = column_name + &#39;_freq&#39;
    print(&#39;Creating frequency feature: %s&#39; % freq_feat)
    # 列+周的target计数
    freq_frame = pd.groupby(data, [column_name, &#39;Semana&#39;])[&#39;target&#39;].count().reset_index()
    freq_frame.rename(columns={&#39;target&#39;: freq_feat}, inplace=True)
    # 计算平均值
    freq_frame = pd.groupby(freq_frame, [column_name])[freq_feat].mean().reset_index()

    # 将平均值join回原来的data中
    return pd.merge(data, freq_frame, how=&#39;left&#39;, on=[column_name], left_index=False,
                    right_index=False, suffixes=(&#39;&#39;, &#39;_freq&#39;), copy=False)

def build_model(df, features, model_params):
    &#39;&#39;&#39;
    构建模型训练和测试
      df: dataframe to be modled - 用来训练和测试的数据
      features: column names of df that should be used in model - 特征列
      params: {xgb_param_key: &#39;xgb_param_value&#39;} - 参数
    &#39;&#39;&#39;
    mask = df[&#39;Demanda_uni_equil&#39;].isnull()
    test = df[mask]
    train = df[~mask]
    train.loc[: , &#39;target&#39;] = train.loc[: , &#39;target&#39;].apply(lambda x: np.log(x + 1))

    xlf = xgb.XGBRegressor(**model_params)

    x_train, x_test, y_train, y_test = train_test_split(train[features], train[&#39;target&#39;], test_size=0.01, random_state=1)

    xlf.fit(x_train, y_train, eval_metric=&#39;rmse&#39;, verbose=1, eval_set=[(x_test, y_test)], early_stopping_rounds=100)
    preds = xlf.predict(x_test)
    print(&#39;RMSE of log(Demanda_uni_equil[x_test]) : %s&quot; &#39; % str(mean_squared_error(y_test,preds) ** 0.5))

    # 预测第10周的销量
    print(&#39;Predicting Demanda_uni_equil for Semana 10&#39;)
    data_test_10 = test.loc[test[&#39;Semana&#39;] == 10, features]
    preds = xlf.predict(data_test_10)
    data_test_10[&#39;Demanda_uni_equil&#39;] = np.exp(preds) - 1
    data_test_10[&#39;id&#39;] = test.loc[test[&#39;Semana&#39;] == 10, &#39;id&#39;].astype(int).tolist()

    # 把预测的第10周的销量结果作为特征来预测11周的数据
    print(&#39;Creating lagged demand feature for Semana 11&#39;)
    data_test_lag = data_test_10[[&#39;Cliente_ID&#39;, &#39;Producto_ID&#39;]]
    data_test_lag[&#39;target_l1&#39;] = data_test_10[&#39;Demanda_uni_equil&#39;]
    data_test_lag = pd.groupby(data_test_lag,[&#39;Cliente_ID&#39;,&#39;Producto_ID&#39;]).mean().reset_index()

    # 预测第11周的销量
    print(&#39;Predicting Demanda_uni_equil for Semana 11&#39;)
    data_test_11 = test.loc[test[&#39;Semana&#39;] == 11, features.difference([&#39;target_l1&#39;])]
    data_test_11 = pd.merge(data_test_11, data_test_lag, how=&#39;left&#39;, on=[&#39;Cliente_ID&#39;, &#39;Producto_ID&#39;],
                            left_index=False, right_index=False, sort=True, copy=False)

    data_test_11 = data_test_11.loc[: , features]#.replace(np.nan, 0, inplace=True)
    preds = xlf.predict(data_test_11)
    data_test_11[&#39;Demanda_uni_equil&#39;] = np.exp(preds) - 1
    data_test_11[&#39;id&#39;] = test.loc[test[&#39;Semana&#39;] == 11, &#39;id&#39;].astype(int).tolist()

    return pd.concat([data_test_10.loc[: , [&#39;id&#39;, &#39;Demanda_uni_equil&#39;]],
                      data_test_11.loc[: , [&#39;id&#39;, &#39;Demanda_uni_equil&#39;]]],
                      axis=0, copy=True)

## --------------------------执行-----------------------------------------

## 首先载入训练集和测试集，并进行基本的数据预处理
df = get_dataframe()

## 构建特征
for i in range(1, 1 + 5):
    if not BIG_LAG and i &gt; 1:
        break
    df = create_lagged_feats(df, num_lag=i)

df = df[df[&#39;Semana&#39;] &gt; 8]

## 计算列频率特征
for col_name in [&#39;Agencia_ID&#39;, &#39;Ruta_SAK&#39;, &#39;Cliente_ID&#39;, &#39;Producto_ID&#39;]:
    df = create_freq_feats(df, col_name)

## 选择部分特征来构建模型
feature_names = df.columns.difference([&#39;id&#39;, &#39;target&#39;, &#39;Demanda_uni_equil&#39;])
print(&#39;Data Cleaned.  Using features: %s&#39; % feature_names)

## 模型参数
xgb_params = {
    &#39;max_depth&#39;: 10,
    &#39;learning_rate&#39;: 0.01,
    &#39;n_estimators&#39;: 75,
    &#39;subsample&#39;: .85,
    &#39;colsample_bytree&#39;: 0.7,
    &#39;objective&#39;: &#39;reg:linear&#39;,
    &#39;silent&#39;: True,
    &#39;nthread&#39;: -1,
    &#39;gamma&#39;: 0,
    &#39;min_child_weight&#39;: 1,
    &#39;max_delta_step&#39;: 0,
    &#39;subsample&#39;: 0.85,
    &#39;colsample_bytree&#39;: 0.7,
    &#39;colsample_bylevel&#39;: 1,
    &#39;reg_alpha&#39;: 0,
    &#39;reg_lambda&#39;: 1,
    &#39;scale_pos_weight&#39;: 1,
    &#39;missing&#39;: None,
    &#39;seed&#39;: 1
}

## 训练模型并写入结果
submission = build_model(df, feature_names, xgb_params)
submission.to_csv(&#39;submission.csv&#39;, index=False)
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.notehub.cn/2016/09/09/algo/kaggle/gbid/" data-id="ciucofbxs003x1fjh1pclatkm" class="article-share-link">分享到</a>
      
        <a href="http://www.notehub.cn/2016/09/09/algo/kaggle/gbid/#ds-thread" class="article-comment-link">评论</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/kaggle/">kaggle</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-dev/python/pandas_reset_index" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/08/dev/python/pandas_reset_index/">pandas reset_index</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2016/09/08/dev/python/pandas_reset_index/">
      <time datetime="2016-09-08T02:19:56.000Z" itemprop="datePublished">2016-09-08</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/dev/">dev</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <pre><code class="python">df1 = pandas.DataFrame( {
    &quot;Name&quot; : [&quot;Alice&quot;, &quot;Bob&quot;, &quot;Mallory&quot;, &quot;Mallory&quot;, &quot;Bob&quot; , &quot;Mallory&quot;] ,
    &quot;City&quot; : [&quot;Seattle&quot;, &quot;Seattle&quot;, &quot;Portland&quot;, &quot;Seattle&quot;, &quot;Seattle&quot;, &quot;Portland&quot;] } )
</code></pre>
<pre><code class="python">g1.add_suffix(&#39;_Count&#39;).reset_index()
</code></pre>
<pre><code class="python">Out[21]:
      Name      City  City_Count  Name_Count
0    Alice   Seattle           1           1
1      Bob   Seattle           2           2
2  Mallory  Portland           2           2
3  Mallory   Seattle           1           1
</code></pre>
<pre><code class="python">DataFrame({&#39;count&#39; : df1.groupby( [ &quot;Name&quot;, &quot;City&quot;] ).size()}).reset_index()
</code></pre>
<pre><code>      Name      City  count
0    Alice   Seattle      1
1      Bob   Seattle      2
2  Mallory  Portland      2
3  Mallory   Seattle      1
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.notehub.cn/2016/09/08/dev/python/pandas_reset_index/" data-id="ciucofbyp006t1fjhcjiip11a" class="article-share-link">分享到</a>
      
        <a href="http://www.notehub.cn/2016/09/08/dev/python/pandas_reset_index/#ds-thread" class="article-comment-link">评论</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-dev/python/python_print_chs" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/31/dev/python/python_print_chs/">Python print 中文乱码问题</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2016/08/31/dev/python/python_print_chs/">
      <time datetime="2016-08-31T02:19:56.000Z" itemprop="datePublished">2016-08-31</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/dev/">dev</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <pre><code class="python">#!/usr/bin/env python
# -*- coding: UTF-8 -*-
import sys
reload(sys)
sys.setdefaultencoding(&#39;utf-8&#39;)

file = open(&#39;~/file.csv&#39;)
lines = file.readlines()
for line in lines:
    print line.decode(&#39;gbk&#39;)
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.notehub.cn/2016/08/31/dev/python/python_print_chs/" data-id="ciucofbys00711fjh16v3plu9" class="article-share-link">分享到</a>
      
        <a href="http://www.notehub.cn/2016/08/31/dev/python/python_print_chs/#ds-thread" class="article-comment-link">评论</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <article id="post-algo/kaggle/facial_keypoints" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/26/algo/kaggle/facial_keypoints/">kaggle之人脸特征识别</a>
    </h1>
  

        <div class="article-meta">
          
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2016/08/26/algo/kaggle/facial_keypoints/">
      <time datetime="2016-08-26T05:48:13.000Z" itemprop="datePublished">2016-08-26</time>
    </a>
  </div>


          
  <div class="article-category">
  	<i class="fa fa-folder"></i>
    <a class="article-category-link" href="/categories/kaggle/">kaggle</a>
  </div>

        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
                
        <p><a href="https://github.com/lijingpeng/kaggle/tree/master/competitions/Facial_Keypoints_Detection" target="_blank" rel="external">Facial_Keypoints_Detection github code</a></p>
<p><a href="https://www.kaggle.com/c/facial-keypoints-detection" target="_blank" rel="external">facial-keypoints-detection</a>, 这是一个人脸识别任务，任务是识别人脸图片中的眼睛、鼻子、嘴的位置。训练集包含以下15个位置的坐标，行末是图片的像素值，共96*96个像素值。测试集只包含图片的像素值。</p>
<pre><code>left_eye_center, right_eye_center, left_eye_inner_corner, left_eye_outer_corner, right_eye_inner_corner, right_eye_outer_corner, left_eyebrow_inner_end, left_eyebrow_outer_end, right_eyebrow_inner_end, right_eyebrow_outer_end, nose_tip, mouth_left_corner, mouth_right_corner, mouth_center_top_lip, mouth_center_bottom_lip
</code></pre><pre><code class="python">import cPickle as pickle
from datetime import datetime
import os
import sys

import numpy as np
import pandas as pd
from lasagne import layers
from nolearn.lasagne import BatchIterator
from nolearn.lasagne import NeuralNet
from pandas.io.parsers import read_csv
from sklearn.utils import shuffle
import theano
</code></pre>
<pre><code>/Library/Python/2.7/site-packages/theano/tensor/signal/downsample.py:6: UserWarning: downsample module has been moved to the theano.tensor.signal.pool module.
  &quot;downsample module has been moved to the theano.tensor.signal.pool module.&quot;)
</code></pre><h2 id="u6570_u636E_u8F7D_u5165_u4E0E_u9884_u89C8"><a href="#u6570_u636E_u8F7D_u5165_u4E0E_u9884_u89C8" class="headerlink" title="数据载入与预览"></a>数据载入与预览</h2><pre><code class="python">train_file = &#39;training.csv&#39;
test_file = &#39;test.csv&#39;

def load(test=False, cols=None):
    &quot;&quot;&quot;
    载入数据，通过参数控制载入训练集还是测试集，并筛选特征列
    &quot;&quot;&quot;
    fname = test_file if test else train_file
    df = pd.read_csv(os.path.expanduser(fname))

    # 将图像数据转换为数组
    df[&#39;Image&#39;] = df[&#39;Image&#39;].apply(lambda x: np.fromstring(x, sep=&#39; &#39;))

    # 筛选指定的数据列
    if cols:  
        df = df[list(cols) + [&#39;Image&#39;]]

    print(df.count())  # 每列的简单统计
    df = df.dropna()  # 删除空数据

    # 归一化到0到1
    X = np.vstack(df[&#39;Image&#39;].values) / 255.  
    X = X.astype(np.float32)

    # 针对训练集目标标签进行归一化
    if not test:
        y = df[df.columns[:-1]].values
        y = (y - 48) / 48  
        X, y = shuffle(X, y, random_state=42)
        y = y.astype(np.float32)
    else:
        y = None

    return X, y
</code></pre>
<pre><code class="python"># 将单行像素数据转换为三维矩阵
def load2d(test=False, cols=None):
    X, y = load(test=test, cols=cols)
    X = X.reshape(-1, 1, 96, 96)
    return X, y
</code></pre>
<h2 id="u6570_u636E_u5904_u7406"><a href="#u6570_u636E_u5904_u7406" class="headerlink" title="数据处理"></a>数据处理</h2><p>一种方式是我们训练一个分类器，用来分类所有的目标特征。另一种是针对眼镜、鼻子、嘴分别设置不同的分类器，每个分类器只预测单个目标。通过观察数据我们发现，训练集中有许多缺失数据，如果训练一个分类器，删掉缺失数据会让我们的样本集变小，不能很好地利用起数据，因此，我们选择第二种方式，每个目标训练一个分类器，这样更好的利用样本数据。</p>
<pre><code class="python">from collections import OrderedDict
from sklearn.base import clone

SPECIALIST_SETTINGS = [
    dict(
        columns=(
            &#39;left_eye_center_x&#39;, &#39;left_eye_center_y&#39;,
            &#39;right_eye_center_x&#39;, &#39;right_eye_center_y&#39;,
            ),
        flip_indices=((0, 2), (1, 3)),
        ),

    dict(
        columns=(
            &#39;nose_tip_x&#39;, &#39;nose_tip_y&#39;,
            ),
        flip_indices=(),
        ),

    dict(
        columns=(
            &#39;mouth_left_corner_x&#39;, &#39;mouth_left_corner_y&#39;,
            &#39;mouth_right_corner_x&#39;, &#39;mouth_right_corner_y&#39;,
            &#39;mouth_center_top_lip_x&#39;, &#39;mouth_center_top_lip_y&#39;,
            ),
        flip_indices=((0, 2), (1, 3)),
        ),

    dict(
        columns=(
            &#39;mouth_center_bottom_lip_x&#39;,
            &#39;mouth_center_bottom_lip_y&#39;,
            ),
        flip_indices=(),
        ),

    dict(
        columns=(
            &#39;left_eye_inner_corner_x&#39;, &#39;left_eye_inner_corner_y&#39;,
            &#39;right_eye_inner_corner_x&#39;, &#39;right_eye_inner_corner_y&#39;,
            &#39;left_eye_outer_corner_x&#39;, &#39;left_eye_outer_corner_y&#39;,
            &#39;right_eye_outer_corner_x&#39;, &#39;right_eye_outer_corner_y&#39;,
            ),
        flip_indices=((0, 2), (1, 3), (4, 6), (5, 7)),
        ),

    dict(
        columns=(
            &#39;left_eyebrow_inner_end_x&#39;, &#39;left_eyebrow_inner_end_y&#39;,
            &#39;right_eyebrow_inner_end_x&#39;, &#39;right_eyebrow_inner_end_y&#39;,
            &#39;left_eyebrow_outer_end_x&#39;, &#39;left_eyebrow_outer_end_y&#39;,
            &#39;right_eyebrow_outer_end_x&#39;, &#39;right_eyebrow_outer_end_y&#39;,
            ),
        flip_indices=((0, 2), (1, 3), (4, 6), (5, 7)),
        ),
    ]
</code></pre>
<pre><code class="python">class FlipBatchIterator(BatchIterator):
    flip_indices = [
        (0, 2), (1, 3),
        (4, 8), (5, 9), (6, 10), (7, 11),
        (12, 16), (13, 17), (14, 18), (15, 19),
        (22, 24), (23, 25),
        ]

    def transform(self, Xb, yb):
        Xb, yb = super(FlipBatchIterator, self).transform(Xb, yb)

        # Flip half of the images in this batch at random:
        bs = Xb.shape[0]
        indices = np.random.choice(bs, bs / 2, replace=False)
        Xb[indices] = Xb[indices, :, :, ::-1]

        if yb is not None:
            # Horizontal flip of all x coordinates:
            yb[indices, ::2] = yb[indices, ::2] * -1

            # Swap places, e.g. left_eye_center_x -&gt; right_eye_center_x
            for a, b in self.flip_indices:
                yb[indices, a], yb[indices, b] = (
                    yb[indices, b], yb[indices, a])

        return Xb, yb
</code></pre>
<pre><code class="python">class EarlyStopping(object):
    def __init__(self, patience=100):
        self.patience = patience
        self.best_valid = np.inf
        self.best_valid_epoch = 0
        self.best_weights = None

    def __call__(self, nn, train_history):
        current_valid = train_history[-1][&#39;valid_loss&#39;]
        current_epoch = train_history[-1][&#39;epoch&#39;]
        if current_valid &lt; self.best_valid:
            self.best_valid = current_valid
            self.best_valid_epoch = current_epoch
            self.best_weights = nn.get_all_params_values()
        elif self.best_valid_epoch + self.patience &lt; current_epoch:
            print(&quot;Early stopping.&quot;)
            print(&quot;Best valid loss was {:.6f} at epoch {}.&quot;.format(
                self.best_valid, self.best_valid_epoch))
            nn.load_params_from(self.best_weights)
            raise StopIteration()
</code></pre>
<pre><code class="python">class AdjustVariable(object):
    def __init__(self, name, start=0.03, stop=0.001):
        self.name = name
        self.start, self.stop = start, stop
        self.ls = None

    def __call__(self, nn, train_history):
        if self.ls is None:
            self.ls = np.linspace(self.start, self.stop, nn.max_epochs)

        epoch = train_history[-1][&#39;epoch&#39;]
        new_value = np.cast[&#39;float32&#39;](self.ls[epoch - 1])
        getattr(nn, self.name).set_value(new_value)
</code></pre>
<pre><code class="python">def float32(k):
    return np.cast[&#39;float32&#39;](k)

net = NeuralNet(
    layers=[
        (&#39;input&#39;, layers.InputLayer),
        (&#39;conv1&#39;, layers.Conv2DLayer),
        (&#39;pool1&#39;, layers.MaxPool2DLayer),
        (&#39;dropout1&#39;, layers.DropoutLayer),
        (&#39;conv2&#39;, layers.Conv2DLayer),
        (&#39;pool2&#39;, layers.MaxPool2DLayer),
        (&#39;dropout2&#39;, layers.DropoutLayer),
        (&#39;conv3&#39;, layers.Conv2DLayer),
        (&#39;pool3&#39;, layers.MaxPool2DLayer),
        (&#39;dropout3&#39;, layers.DropoutLayer),
        (&#39;hidden4&#39;, layers.DenseLayer),
        (&#39;dropout4&#39;, layers.DropoutLayer),
        (&#39;hidden5&#39;, layers.DenseLayer),
        (&#39;output&#39;, layers.DenseLayer),
        ],
    input_shape=(None, 1, 96, 96),
    conv1_num_filters=32, conv1_filter_size=(3, 3), pool1_pool_size=(2, 2),
    dropout1_p=0.1,
    conv2_num_filters=64, conv2_filter_size=(2, 2), pool2_pool_size=(2, 2),
    dropout2_p=0.2,
    conv3_num_filters=128, conv3_filter_size=(2, 2), pool3_pool_size=(2, 2),
    dropout3_p=0.3,
    hidden4_num_units=300,
    dropout4_p=0.5,
    hidden5_num_units=300,
    output_num_units=30, output_nonlinearity=None,

    update_learning_rate=theano.shared(float32(0.03)),
    update_momentum=theano.shared(float32(0.9)),

    regression=True,
    batch_iterator_train = BatchIterator(batch_size = 100),
    batch_iterator_test = BatchIterator(batch_size = 100),
#     batch_iterator_train=FlipBatchIterator(batch_size=128),
#     on_epoch_finished=[
#         AdjustVariable(&#39;update_learning_rate&#39;, start=0.03, stop=0.0001),
#         AdjustVariable(&#39;update_momentum&#39;, start=0.9, stop=0.999),
#         EarlyStopping(patience=200),
#         ],
    max_epochs=10,
    verbose=1,
)
</code></pre>
<pre><code class="python">def fit_specialists(fname_pretrain=None):
    if fname_pretrain:
        with open(fname_pretrain, &#39;rb&#39;) as f:
            net_pretrain = pickle.load(f)
    else:
        net_pretrain = None

    specialists = OrderedDict()

    for setting in SPECIALIST_SETTINGS:
        cols = setting[&#39;columns&#39;]
        X, y = load2d(cols=cols)

        model = clone(net)
        model.output_num_units = y.shape[1]
        model.batch_iterator_train.flip_indices = setting[&#39;flip_indices&#39;]
        model.max_epochs = int(4e6 / y.shape[0])
        if &#39;kwargs&#39; in setting:
            # an option &#39;kwargs&#39; in the settings list may be used to
            # set any other parameter of the net:
            vars(model).update(setting[&#39;kwargs&#39;])

        if net_pretrain is not None:
            # if a pretrain model was given, use it to initialize the
            # weights of our new specialist model:
            model.load_params_from(net_pretrain)

        print(&quot;Training model for columns {} for {} epochs&quot;.format(
            cols, model.max_epochs))
        model.fit(X, y)
        specialists[cols] = model

    with open(&#39;net-specialists.pickle&#39;, &#39;wb&#39;) as f:
        # this time we&#39;re persisting a dictionary with all models:
        pickle.dump(specialists, f, -1)
</code></pre>
<pre><code class="python">def predict(fname_specialists=&#39;net-specialists.pickle&#39;):
    with open(fname_specialists, &#39;rb&#39;) as f:
        specialists = pickle.load(f)

    X = load2d(test=True)[0]
    y_pred = np.empty((X.shape[0], 0))

    for model in specialists.values():
        y_pred1 = model.predict(X)
        y_pred = np.hstack([y_pred, y_pred1])

    columns = ()
    for cols in specialists.keys():
        columns += cols

    y_pred2 = y_pred * 48 + 48
    y_pred2 = y_pred2.clip(0, 96)
    df = DataFrame(y_pred2, columns=columns)

    lookup_table = read_csv(os.path.expanduser(FLOOKUP))
    values = []

    for index, row in lookup_table.iterrows():
        values.append((
            row[&#39;RowId&#39;],
            df.ix[row.ImageId - 1][row.FeatureName],
            ))

    now_str = datetime.now().isoformat().replace(&#39;:&#39;, &#39;-&#39;)
    submission = DataFrame(values, columns=(&#39;RowId&#39;, &#39;Location&#39;))
    filename = &#39;submission-{}.csv&#39;.format(now_str)
    submission.to_csv(filename, index=False)
    print(&quot;Wrote {}&quot;.format(filename))
</code></pre>
<pre><code class="python">if __name__ == &#39;__main__&#39;:
    fit_specialists()
    predict()
</code></pre>
<pre><code>left_eye_center_x     7039
left_eye_center_y     7039
right_eye_center_x    7036
right_eye_center_y    7036
Image                 7049
dtype: int64
Training model for columns (&#39;left_eye_center_x&#39;, &#39;left_eye_center_y&#39;, &#39;right_eye_center_x&#39;, &#39;right_eye_center_y&#39;) for 568 epochs


/Library/Python/2.7/site-packages/lasagne/layers/conv.py:489: UserWarning: The `image_shape` keyword argument to `tensor.nnet.conv2d` is deprecated, it has been renamed to `input_shape`.
  border_mode=border_mode)


# Neural Network with 4779676 learnable parameters

## Layer information

  #  name      size
---  --------  ---------
  0  input     1x96x96
  1  conv1     32x94x94
  2  pool1     32x47x47
  3  dropout1  32x47x47
  4  conv2     64x46x46
  5  pool2     64x23x23
  6  dropout2  64x23x23
  7  conv3     128x22x22
  8  pool3     128x11x11
  9  dropout3  128x11x11
 10  hidden4   300
 11  dropout4  300
 12  hidden5   300
 13  output    4

# Neural Network with 4779676 learnable parameters

## Layer information

  #  name      size
---  --------  ---------
  0  input     1x96x96
  1  conv1     32x94x94
  2  pool1     32x47x47
  3  dropout1  32x47x47
  4  conv2     64x46x46
  5  pool2     64x23x23
  6  dropout2  64x23x23
  7  conv3     128x22x22
  8  pool3     128x11x11
  9  dropout3  128x11x11
 10  hidden4   300
 11  dropout4  300
 12  hidden5   300
 13  output    4

  epoch    trn loss    val loss    trn/val  dur
-------  ----------  ----------  ---------  -------
      1     [36m0.01113[0m     [32m0.00475[0m    2.34387  181.86s
  epoch    trn loss    val loss    trn/val  dur
-------  ----------  ----------  ---------  -------
      1     [36m0.01113[0m     [32m0.00475[0m    2.34387  181.86s
</code></pre><h3 id="Warning"><a href="#Warning" class="headerlink" title="Warning"></a>Warning</h3><p>单机执行实在是太慢了，这里可以使用Amazon AWS的GPU实例来运行程序，创建过程如下参见：<a href="https://www.kaggle.com/c/facial-keypoints-detection/details/deep-learning-tutorial" target="_blank" rel="external">deep-learning-tutorial</a></p>
<p>在运行实例之后还有几点要做：</p>
<ol>
<li>安装python pip &gt; sudo apt-get install python-pip python-dev build-essential   </li>
<li>创建Kaggle cookies文件，为了下载训练和测试数据，我们需要将本地浏览器中的cookies导出，通过chrome 插件：<a href="https://chrome.google.com/webstore/detail/cookietxt-export/lopabhfecdfhgogdbojmaicoicjekelh/related" target="_blank" rel="external">https://chrome.google.com/webstore/detail/cookietxt-export/lopabhfecdfhgogdbojmaicoicjekelh/related</a>   </li>
<li>把Github中的<a href="https://github.com/wendykan/AWSGPU_DeepLearning" target="_blank" rel="external">https://github.com/wendykan/AWSGPU_DeepLearning</a> clone到你的AWS实例中，进行一些机器学习的初始化工作。  </li>
</ol>
<p>一些参考：<br><a href="http://ramhiser.com/2016/01/05/installing-tensorflow-on-an-aws-ec2-instance-with-gpu-support/" target="_blank" rel="external">http://ramhiser.com/2016/01/05/installing-tensorflow-on-an-aws-ec2-instance-with-gpu-support/</a><br><a href="http://danielnouri.org/notes/2014/12/17/using-convolutional-neural-nets-to-detect-facial-keypoints-tutorial/" target="_blank" rel="external">http://danielnouri.org/notes/2014/12/17/using-convolutional-neural-nets-to-detect-facial-keypoints-tutorial/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.notehub.cn/2016/08/26/algo/kaggle/facial_keypoints/" data-id="ciucofbxt00401fjhi5u62cqv" class="article-share-link">分享到</a>
      
        <a href="http://www.notehub.cn/2016/08/26/algo/kaggle/facial_keypoints/#ds-thread" class="article-comment-link">评论</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/kaggle/">kaggle</a></li></ul>

    </footer>
  </div>
  
</article>



    
      <nav id="page-nav">
        <a class="extend prev" rel="prev" href="/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><a class="extend next" rel="next" href="/page/3/">下一页 &raquo;</a>
      </nav>
    </section>
      
        <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul id="recent-post" class="">
        
          <li>
            
            <div class="item-thumbnail">
              <a href="/2016/10/10/dev/esop/" class="thumbnail">
  
    <span class="thumbnail-image thumbnail-none"></span>
  
</a>
            </div>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/categories/dev/">dev</a></p>
              <p class="item-title"><a href="/2016/10/10/dev/esop/" class="title">Elasticsearch-索引优化</a></p>
              <p class="item-date"><time datetime="2016-10-10T02:19:56.000Z" itemprop="datePublished">2016-10-10</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-thumbnail">
              <a href="/2016/09/18/algo/ml/categorical_features/" class="thumbnail">
  
    <span class="thumbnail-image thumbnail-none"></span>
  
</a>
            </div>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/categories/machine-learning/">machine learning</a></p>
              <p class="item-title"><a href="/2016/09/18/algo/ml/categorical_features/" class="title">Handling categorical features</a></p>
              <p class="item-date"><time datetime="2016-09-17T16:00:00.000Z" itemprop="datePublished">2016-09-18</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-thumbnail">
              <a href="/2016/09/18/algo/sklearn/Dummification_vs_encoding/" class="thumbnail">
  
    <span class="thumbnail-image thumbnail-none"></span>
  
</a>
            </div>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/categories/machine-learning/">machine learning</a></p>
              <p class="item-title"><a href="/2016/09/18/algo/sklearn/Dummification_vs_encoding/" class="title">XGBoost Categorical Variables - Dummification vs encoding</a></p>
              <p class="item-date"><time datetime="2016-09-17T16:00:00.000Z" itemprop="datePublished">2016-09-18</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-thumbnail">
              <a href="/2016/09/14/algo/one_hot_encode/" class="thumbnail">
  
    <span class="thumbnail-image thumbnail-none"></span>
  
</a>
            </div>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/categories/machine-learning/">machine learning</a></p>
              <p class="item-title"><a href="/2016/09/14/algo/one_hot_encode/" class="title">One-Hot Encoding</a></p>
              <p class="item-date"><time datetime="2016-09-13T16:00:00.000Z" itemprop="datePublished">2016-09-14</time></p>
            </div>
          </li>
        
          <li>
            
            <div class="item-thumbnail">
              <a href="/2016/09/12/system/linux_grep/" class="thumbnail">
  
    <span class="thumbnail-image thumbnail-none"></span>
  
</a>
            </div>
            
            <div class="item-inner">
              <p class="item-category"><a class="article-category-link" href="/categories/system/">system</a></p>
              <p class="item-title"><a href="/2016/09/12/system/linux_grep/" class="title">Linux查找文件内容（grep）</a></p>
              <p class="item-date"><time datetime="2016-09-11T16:00:00.000Z" itemprop="datePublished">2016-09-12</time></p>
            </div>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Hadoop/">Hadoop</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hash/">Hash</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hive/">Hive</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Photo/">Photo</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/SQL/">SQL</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Zabbix/">Zabbix</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ads/">ads</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/c/">c++</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/dev/">dev</a><span class="category-list-count">32</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/github/">github</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/internet/">internet</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/kaggle/">kaggle</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/machine-learning/">machine learning</a><span class="category-list-count">23</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/">other</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/sklearn/">sklearn</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/system/">system</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/travel/">travel</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a><span class="category-list-count">4</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Apache/" style="font-size: 10px;">Apache</a> <a href="/tags/Bandits/" style="font-size: 12.5px;">Bandits</a> <a href="/tags/Elasticsearch-docker/" style="font-size: 10px;">Elasticsearch, docker</a> <a href="/tags/FlatBuffers/" style="font-size: 10px;">FlatBuffers</a> <a href="/tags/Google/" style="font-size: 10px;">Google</a> <a href="/tags/Granger-causality/" style="font-size: 10px;">Granger causality</a> <a href="/tags/GridSearchCV/" style="font-size: 10px;">GridSearchCV</a> <a href="/tags/HTTPS/" style="font-size: 10px;">HTTPS</a> <a href="/tags/Jquery/" style="font-size: 10px;">Jquery</a> <a href="/tags/MapReduce/" style="font-size: 10px;">MapReduce</a> <a href="/tags/Mock/" style="font-size: 10px;">Mock</a> <a href="/tags/Monument-Vallay/" style="font-size: 10px;">Monument Vallay</a> <a href="/tags/Mysql/" style="font-size: 12.5px;">Mysql</a> <a href="/tags/PPTP-vpn/" style="font-size: 12.5px;">PPTP, vpn</a> <a href="/tags/Photoshop/" style="font-size: 10px;">Photoshop</a> <a href="/tags/Pipeline/" style="font-size: 10px;">Pipeline</a> <a href="/tags/Shadowsocks/" style="font-size: 10px;">Shadowsocks</a> <a href="/tags/ad/" style="font-size: 10px;">ad</a> <a href="/tags/apache/" style="font-size: 10px;">apache</a> <a href="/tags/blade/" style="font-size: 10px;">blade</a> <a href="/tags/crontab/" style="font-size: 10px;">crontab</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/elasticsearch/" style="font-size: 12.5px;">elasticsearch</a> <a href="/tags/font/" style="font-size: 10px;">font</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/go/" style="font-size: 17.5px;">go</a> <a href="/tags/hashmap/" style="font-size: 10px;">hashmap</a> <a href="/tags/kaggle/" style="font-size: 20px;">kaggle</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/linux-ldd-依赖关系/" style="font-size: 10px;">linux, ldd, 依赖关系</a> <a href="/tags/lucene/" style="font-size: 10px;">lucene</a> <a href="/tags/nio/" style="font-size: 10px;">nio</a> <a href="/tags/pagerank/" style="font-size: 10px;">pagerank</a> <a href="/tags/photo/" style="font-size: 10px;">photo</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/swift-llvm/" style="font-size: 10px;">swift, llvm</a> <a href="/tags/前端/" style="font-size: 10px;">前端</a> <a href="/tags/广告/" style="font-size: 12.5px;">广告</a> <a href="/tags/开源，许可/" style="font-size: 10px;">开源，许可</a> <a href="/tags/澳门/" style="font-size: 10px;">澳门</a> <a href="/tags/监控，zabbix/" style="font-size: 10px;">监控，zabbix</a> <a href="/tags/贝叶斯/" style="font-size: 10px;">贝叶斯</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">二月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">十二月 2015</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">六月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">五月 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">三月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">二月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">一月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">十二月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">十一月 2014</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">十月 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">六月 2014</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">十一月 2013</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
  <div id="toTop" class="fa fa-chevron-up"></div>
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Li Jingpeng<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="http://github.com/ppoffice">PPOffice</a>
    </div>
  </div>
</footer>
    

<script type="text/javascript">
  var duoshuoQuery = {short_name:"lijingpeng"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>


<script src="//ajax.css.network/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>